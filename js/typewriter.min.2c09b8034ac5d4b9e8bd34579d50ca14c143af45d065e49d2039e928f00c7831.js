class TypewriterEffect{constructor(e){if(this.element=document.getElementById(e),!this.element)return;this.container=this.element.parentElement,this.originalText=this.element.textContent.trim(),this.tokens=[],this.currentIndex=0,this.timeouts=[],this.isTyping=!1,this.resizeTimer=null,this.settings={typingSpeed:this.getCSSVar("--ts")||50,preBlinkDuration:this.getCSSVar("--pbd")||1e3},document.fonts.ready.then(()=>{this.init()}),this.handleResize=this.handleResize.bind(this),window.addEventListener("resize",this.handleResize,{passive:!0})}getCSSVar(e){const t=getComputedStyle(document.documentElement).getPropertyValue(e);return parseInt(t)||parseInt(t.replace("ms",""))}handleResize(){clearTimeout(this.resizeTimer),this.resizeTimer=setTimeout(()=>{this.cleanup(),this.init()},250)}init(){const e=this.wrapCharacters(this.originalText);this.element.innerHTML=e,this.element.className="typewriter-content",this.tokens=Array.from(this.element.querySelectorAll(".char")),this.startSequence()}wrapCharacters(e){const t=e.split(""),n=new Array(t.length);for(let e=0;e<t.length;e++){const s=t[e];n[e]=s===`
`?"<br>":`<span class="char">${s}</span>`}return n.join("")}startSequence(){this.element.classList.add("ready");const e=setTimeout(()=>{this.element.classList.remove("ready"),this.type()},this.settings.preBlinkDuration);this.timeouts.push(e)}type(){if(this.isTyping=!0,this.currentIndex<this.tokens.length){const e=this.tokens[this.currentIndex];this.currentIndex>0&&this.tokens[this.currentIndex-1].classList.remove("cursor-active"),e.style.opacity="1",e.classList.add("cursor-active"),this.currentIndex++;const t=setTimeout(()=>this.type(),this.settings.typingSpeed);this.timeouts.push(t)}else if(this.isTyping=!1,this.tokens.length>0){const e=this.tokens[this.tokens.length-1];e.classList.remove("cursor-active"),e.classList.add("cursor-idle")}}cleanup(){for(let e=0;e<this.timeouts.length;e++)clearTimeout(this.timeouts[e]);this.timeouts.length=0,this.currentIndex=0,this.element.innerHTML=this.originalText,this.element.classList.remove("ready")}destroy(){this.cleanup(),window.removeEventListener("resize",this.handleResize),this.resizeTimer&&(clearTimeout(this.resizeTimer),this.resizeTimer=null)}}let typewriter=null;function initTypewriter(){const e=document.getElementById("home-subtitle");e&&(typewriter=new TypewriterEffect("home-subtitle"))}function cleanup(){typewriter&&(typewriter.destroy(),typewriter=null)}addEventListener("load",initTypewriter,{once:!0}),addEventListener("beforeunload",cleanup,{once:!0}),addEventListener("pagehide",cleanup,{once:!0})