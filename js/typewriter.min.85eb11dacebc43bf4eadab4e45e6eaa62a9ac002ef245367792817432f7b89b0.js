class TypewriterEffect{constructor(e){this.element=document.getElementById(e),this.container=this.element.parentElement,this.originalText=this.element.textContent,this.typingText="",this.currentIndex=0,this.timeouts=[],this.measurer=null,this.settings={preBlinkDuration:this.getCSSVar("--pbd"),typingSpeed:this.getCSSVar("--ts")},this.init()}getCSSVar(e){const t=getComputedStyle(document.documentElement).getPropertyValue(e);return parseInt(t)||parseInt(t.replace("ms",""))}init(){this.createMeasurer(),this.calculateContainerSize(),this.startSequence()}createMeasurer(){this.measurer=document.createElement("div"),this.measurer.className="measure-element";const e=getComputedStyle(this.element);this.measurer.style.font=e.font,this.measurer.style.fontSize=e.fontSize,this.measurer.style.fontFamily=e.fontFamily,this.measurer.style.fontWeight=e.fontWeight,this.measurer.style.letterSpacing=e.letterSpacing,this.measurer.style.fontStyle=e.fontStyle,this.measurer.style.textAlign=e.textAlign,this.measurer.style.padding=e.padding,this.measurer.style.boxSizing=e.boxSizing,document.body.appendChild(this.measurer)}calculateContainerSize(){this.typingText=this.calculateWrappedText();const e=this.typingText.split(`
`).length,t=parseFloat(getComputedStyle(this.element).lineHeight),n=(e+.5)*t;this.container.style.height=`${n}px`}calculateWrappedText(){const s=getComputedStyle(this.element),o=parseFloat(s.paddingLeft),i=parseFloat(s.paddingRight),a=this.element.clientWidth-o-i,n=this.originalText.split(" ");let t="",e="";for(let s=0;s<n.length;s++){const o=n[s],i=e===""?o:e+" "+o;this.measurer.textContent=i,this.measurer.clientWidth>a&&e!==""?(t+=e,s<n.length-1&&(t+=`
`),e=o):e=i}return e!==""&&(t+=e),t}type(){if(this.currentIndex<this.typingText.length){this.element.textContent=this.typingText.slice(0,this.currentIndex+1),this.currentIndex++;const e=setTimeout(()=>this.type(),this.settings.typingSpeed);this.timeouts.push(e)}else this.element.className="done"}startSequence(){this.element.textContent="",this.currentIndex=0,this.element.className="ready";const e=setTimeout(()=>{this.element.className="typing",this.type()},this.settings.preBlinkDuration);this.timeouts.push(e)}type(){if(this.currentIndex<this.typingText.length){this.element.textContent=this.typingText.slice(0,this.currentIndex+1),this.currentIndex++;const e=setTimeout(()=>this.type(),this.settings.typingSpeed);this.timeouts.push(e)}else this.element.className="done"}destroy(){this.timeouts.forEach(e=>clearTimeout(e)),this.timeouts=[],this.measurer&&this.measurer.parentNode&&(this.measurer.parentNode.removeChild(this.measurer),this.measurer=null),this.element&&(this.element.textContent=this.originalText,this.element.className="")}}let typewriter=null;function initTypewriter(){typewriter=new TypewriterEffect("home-subtitle")}function cleanup(){typewriter&&(typewriter.destroy(),typewriter=null)}addEventListener("load",initTypewriter),addEventListener("beforeunload",cleanup),addEventListener("pagehide",cleanup)